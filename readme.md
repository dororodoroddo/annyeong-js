# annyeong-js
## Introduction
Reactive SPA Framework for learning proxy and typescript

### 특징
* 코드에서 MVVM 패턴의 구분에서의 차별화
  * VIEW(컴포넌트) <-> VIEW MODEL(어트리뷰트 단위) <-> MODEL(상태관리)
  * 컴포넌트 작성 단계에서는 reactive가 없는 DOM 트리 나열에 집중
  * 각 컴포넌트(HTMLELEMENT)의 어트리뷰트를 뷰모델로 설정하여 HTML 렌더링에 꼭 필요한 뷰모델만 가지고 있음
  * 뷰모델은 프롭스가 아닌 상태의 변화에만 반응형으로 동작함
  * 예외적으로 상태에 가변적으로 생성되는(리스트형) 돔 구조는 키를 필수적으로 받아, 키의 변화에 따라 initial, remove만 시켜줌(modify는 상태의 변화에만 의존하여 무시)
* 모듈 단위 특화 상태관리자
  * 같은 모듈이 여러 개 생성될 때, 상태는 공유 되면 안되므로 가볍고 런타임에 생성되며 이름에 의존되지 않음.
  * 상태관리끼리 트리로 연결되어 상위 상태에 접근 가능


### TODO (구조 계획)
* 상태관리와 컴포넌트 분리
  * 컴포넌트는 함수와 변수를 주입하는 데에 집중하고 함수와 상태관리는 분리하기
  * 프롭스는 initial에만 사용하고 변화는 반영하지 않음
  * 프롭스로 대신 상태관리 모듈을 넘겨서 지역 단위 상태관리를 통해 프롭스 드릴링 방지 
* 상태변화 -> state 싱크 프로세스 -> getter 싱크 프로세스 -> 렌더 프로세스 순서를 유지하며 nextTick을 호출할 수 있는 구조 생성
  * 여러 스테이트를 호출하는 게터가 있을 수 있으므로 스테이트 변화를 모아 게터는 한번만 호출한다.
  * 여러 스테이트 및 게터를 호출하는 렌더가 있을 수 있으므로 변화 이후 렌더는 한번만 호출한다.
  * 모든 프로세스 이후 다음 각 프로세스를 쌓을 수 있는 nextTick 함수 구현
  * 렌더 함수는 과도한 호출을 막도록 requestAnimationFrame으로 비워주기
  * 동시성을 위한 프로세스 큐를 만들어 제너레이터로 쪼갠 함수를 렌더 프로세스가 비워질 때마다(비어있다면 계속 호출) 실행하도록 한다.
* 돔트리 구조를 구현하는 함수는 마운트 시에만 동작
  * 리스트 형태로 돔트리가 가변적일 떄는 키를 통해 구분하여 이니셜과 리무브만 실행
* 라우터
  
* 1.0 나오기 전까진 커밋 기록 유지 후 rebase 하기

### 특징
* dom element의 속성값과 상태의 변화를 this와 반응형으로 연결하여 사용하기 편합니다.
* frame단위 렌더링을 통한 최적화 및 활용


## 기록
* 22/11/19 - 신 구조로 개편(구버전은 구버전 브랜치로 이동)
* 22/10/10 - 프로젝트 시작